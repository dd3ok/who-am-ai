# Plan+Design — Google GenAI project-id 점검

## 목적 / 문제정의
- 실행 시 Spring AI Google GenAI 임베딩 빈 초기화에서 `project-id` 미설정으로 애플리케이션이 구동되지 않음.
- `application.yml` 및 환경 변수 선언을 점검해 필수 설정(특히 project-id)이 누락 없이 관리되도록 한다.

## 범위(Scope)
- 포함: `spring.ai.google.genai` 관련 설정 값 확인/보완, 필요한 경우 `application.yml` 수정.
- 제외: 다른 AI 모델 옵션, MongoDB/VectorStore 스키마 변경, 배포 자동화.

## 입력 / 출력 / 의존성
- 입력: 제공된 에러 로그, `src/main/resources/application.yml`, Spring AI Google GenAI 문서(context7 참조 예정).
- 출력: 수정된 설정 파일 및 구현 문서(별도), 예상 시나리오.
- 참조: Spring AI Google GenAI 설정 가이드 (see: Principles#참조표기규칙 → context7 문서 ID 기록 예정).
- 환경: 로컬 Spring Boot 애플리케이션, Kotlin.

## 데이터 흐름(DFD) / 시퀀스
1. Spring Boot 부팅 → Spring AI AutoConfig → `googleGenAiEmbeddingConnectionDetails` 생성.
2. 필수 속성(project-id) 미존재 시 빈 생성 실패 → 컨트롤러 의존성 체인 전체 실패.

## 설계(아키텍처 / 모듈 / 의존성)
- 설정 계층: `application.yml` ← 환경 변수(MONGO_URI, GEMINI_API_KEY 등) ← Spring AI AutoConfig.
- 추가 항목: `spring.ai.google.genai.project-id`(및 필요 시 `location`)을 환경 변수 기반으로 주입.
- Why: Google GenAI Embedding API는 프로젝트 식별자를 요구하므로 명시적 설정 필요.

## 리스크 / 가정
- 리스크: 프로젝트/위치 값이 환경마다 다르면 단일 기본값이 맞지 않을 수 있음.
- 가정: `GEMINI_PROJECT_ID`, `GEMINI_LOCATION` 등의 환경 변수 추가가 가능함.

## 완료 기준(DoD)
- `application.yml`에 project-id(및 필요한 추가 값)이 정의되어 있음.
- Why/Scope 기록 및 Implement 문서 작성 준비.
- 구현 후 테스트 시나리오(미실행) 정의 가능.

## Why / Scope 기록
- Why: 서비스 기동 불가 상태를 해소하고 Spring AI Google GenAI를 정상 구성하기 위함.
- Scope: 설정 파일 검토와 최소한의 속성 추가에 한정.
